<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <comment>Action override created by Lightning App Builder during activation.</comment>
        <content>Payment_Record_Page</content>
        <formFactor>Large</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Flexipage</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <comment>Action override created by Lightning App Builder during activation.</comment>
        <content>Payment_Record_Page</content>
        <formFactor>Small</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Flexipage</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>Payment_Compact_Layout</compactLayoutAssignment>
    <compactLayouts>
        <fullName>Payment_Compact_Layout</fullName>
        <fields>Name</fields>
        <fields>Project__c</fields>
        <fields>PaymentRequest__c</fields>
        <fields>AmountPaid__c</fields>
        <label>Payment Compact Layout</label>
    </compactLayouts>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>It is child object of Payment Request.</description>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>Private</externalSharingModel>
    <fields>
        <fullName>ActualStateAmount__c</fullName>
        <defaultValue>0</defaultValue>
        <description>State Amount Paid.</description>
        <externalId>false</externalId>
        <inlineHelpText>State Amount Paid.</inlineHelpText>
        <label>State Amount Paid</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>AmountPaid__c</fullName>
        <description>Total Amount Paid in this Payment for the Project.</description>
        <externalId>false</externalId>
        <inlineHelpText>Total Amount Paid in this Payment for the Project.</inlineHelpText>
        <label>Amount Paid</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>CheckPaymentDate__c</fullName>
        <description>Date on which Payment has been issued.</description>
        <encryptionScheme>None</encryptionScheme>
        <externalId>false</externalId>
        <inlineHelpText>Date on which Payment has been issued.</inlineHelpText>
        <label>Check Payment Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>CheckReferenceNumber__c</fullName>
        <description>Reference number of the Check through which Payment has issued.</description>
        <encryptionScheme>None</encryptionScheme>
        <externalId>false</externalId>
        <inlineHelpText>Reference number of the Check through which Payment has issued.</inlineHelpText>
        <label>Check / Reference Number</label>
        <length>50</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Closeout_Payment__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>This self-lookup field points to the Closeout Payment due to which these individual Payments have been created per Project.</description>
        <externalId>false</externalId>
        <inlineHelpText>This self-lookup field points to the Closeout Payment due to which these individual Payments have been created per Project.</inlineHelpText>
        <label>Closeout Payment</label>
        <referenceTo>Payment__c</referenceTo>
        <relationshipLabel>Payments</relationshipLabel>
        <relationshipName>Payments</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>External_Id__c</fullName>
        <caseSensitive>true</caseSensitive>
        <encryptionScheme>None</encryptionScheme>
        <externalId>true</externalId>
        <label>External Id</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>FederalAmountPaid__c</fullName>
        <description>Total Federal Amount Paid on this Payment.</description>
        <externalId>false</externalId>
        <inlineHelpText>Total Federal Amount Paid on this Payment.</inlineHelpText>
        <label>Total Federal Amount Paid</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Incident_Subrecipient_Summary__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Lookup to Incident Sub - Recipient Summary. Used while creating a Payment for Closeout of an Incident for a particular Sub Recipient.</description>
        <externalId>false</externalId>
        <inlineHelpText>Lookup to Incident Sub - Recipient Summary. Used while creating a Payment for Closeout of an Incident for a particular Sub Recipient.</inlineHelpText>
        <label>Incident Subrecipient Summary</label>
        <referenceTo>Incident_Subrecipient_Stage__c</referenceTo>
        <relationshipLabel>Payments</relationshipLabel>
        <relationshipName>Payments</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Manually_Updated__c</fullName>
        <defaultValue>false</defaultValue>
        <description>If Record is Updated Manually then this field Should be checked</description>
        <externalId>false</externalId>
        <label>Manually Updated</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>PaymentRequest__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Master record for this Payment record.</description>
        <externalId>false</externalId>
        <inlineHelpText>Master record for this Payment record.</inlineHelpText>
        <label>Payment Request</label>
        <referenceTo>Payment_Request__c</referenceTo>
        <relationshipLabel>Payments</relationshipLabel>
        <relationshipName>Payments</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Payment_Type__c</fullName>
        <description>This field define\s Type of the Payment - 
Closeout Payment : Incident - Sub Recipient Closeout Payment.
Regular Payment : Regular Payment through PR.</description>
        <externalId>false</externalId>
        <inlineHelpText>This field define\s Type of the Payment - 
Closeout Payment : Incident - Sub Recipient Closeout Payment.
Regular Payment : Regular Payment through PR.</inlineHelpText>
        <label>Payment Type</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Regular Payment</fullName>
                    <default>true</default>
                    <label>Regular Payment</label>
                </value>
                <value>
                    <fullName>Closeout Payment</fullName>
                    <default>false</default>
                    <label>Closeout Payment</label>
                </value>
                <value>
                    <fullName>Final Payment</fullName>
                    <default>false</default>
                    <label>Final Payment</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Project__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Project</label>
        <referenceTo>Project__c</referenceTo>
        <relationshipLabel>Payments</relationshipLabel>
        <relationshipName>Payments</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>StateAdminAmount__c</fullName>
        <defaultValue>0</defaultValue>
        <description>State Admin Amount paid.</description>
        <externalId>false</externalId>
        <inlineHelpText>State Admin Amount paid.</inlineHelpText>
        <label>State Admin Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>StateAmountPaid__c</fullName>
        <description>Total State Amount Paid(State+Admin).</description>
        <externalId>false</externalId>
        <inlineHelpText>Total State Amount Paid(State+Admin).</inlineHelpText>
        <label>Total State Amount Paid</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Transmittal__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>This field is used for final closeout</description>
        <externalId>false</externalId>
        <label>Transmittal</label>
        <referenceTo>Transmittal__c</referenceTo>
        <relationshipLabel>Payments</relationshipLabel>
        <relationshipName>Payments</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <label>Payment</label>
    <nameField>
        <displayFormat>P-{00000}</displayFormat>
        <label>Payment Name</label>
        <trackHistory>true</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Payments</pluralLabel>
    <searchLayouts/>
    <sharingModel>Private</sharingModel>
    <validationRules>
        <fullName>Close_Payment_State_Amount_Validation</fullName>
        <active>false</active>
        <errorConditionFormula>AND( NOT( ISBLANK( Incident_Subrecipient_Summary__c ) ) , ISPICKVAL( Payment_Type__c , &apos;Closeout Payment&apos;)  ,   OR(ActualStateAmount__c &gt; 0 , StateAdminAmount__c &gt; 0) ,  OR(ActualStateAmount__c !=  Incident_Subrecipient_Summary__r.Available_State_Amount__c , StateAdminAmount__c !=  Incident_Subrecipient_Summary__r.Available_State_Admin_Amount__c ) )</errorConditionFormula>
        <errorMessage>For Closeout Payment &quot;State Amount&quot; Should be equal to &quot;Available State Amount&quot; and  &quot;State Admin Amount&quot; Should be equal to &quot;Available State Admin Amount&quot;  of Incident Sub Recipient Summary record.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Closeout_Federal_Amount_Validation</fullName>
        <active>false</active>
        <errorConditionFormula>AND( NOT( ISBLANK( Incident_Subrecipient_Summary__c ) ) ,  ISPICKVAL( Payment_Type__c , &apos;Closeout Payment&apos;)  ,   FederalAmountPaid__c &gt; 0 , FederalAmountPaid__c !=   Incident_Subrecipient_Summary__r.Available_Federal_Amount__c   )</errorConditionFormula>
        <errorDisplayField>FederalAmountPaid__c</errorDisplayField>
        <errorMessage>For Closeout Payment &quot;Federal Amount&quot; Should be equal to &quot;Available Federal Amount&quot; of Incident Sub Recipient Summary record.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Closeout_Payment_Admin_Amount_Validation</fullName>
        <active>false</active>
        <errorConditionFormula>AND( NOT( ISBLANK( Incident_Subrecipient_Summary__c ) ) , ISPICKVAL( Payment_Type__c , &apos;Closeout Payment&apos;)  ,  ActualStateAmount__c != 0 , ActualStateAmount__c != NULL ,  StateAdminAmount__c !=  Incident_Subrecipient_Summary__r.Available_State_Admin_Amount__c  )</errorConditionFormula>
        <errorDisplayField>StateAdminAmount__c</errorDisplayField>
        <errorMessage>For Closeout Payment &quot;State Admin Amount&quot; Should be equal to &quot;Available State Admin Amount&quot; of Incident Sub Recipient Summary record.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Federal_Amount_Paid_Validation</fullName>
        <active>false</active>
        <description>Federal Amount is not Applicable for &quot;State Only&quot; Project.</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) ,
AND( ISPICKVAL( PaymentRequest__r.Project__r.FundingSource__c , &apos;State Only&apos;) , 
AND(NOT( ISBLANK(  FederalAmountPaid__c ) ), NOT( FederalAmountPaid__c == 0 ) ) 
))</errorConditionFormula>
        <errorDisplayField>FederalAmountPaid__c</errorDisplayField>
        <errorMessage>&quot;Federal Amount&quot; is not Applicable for &quot;State Only&quot; Project.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Negative_Amount_Paid_Validation</fullName>
        <active>true</active>
        <description>&quot;Amount Paid&quot; must be Negative, When PR&apos;s Approved Payment Amount is Negative.</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) ,  OR( AND(PaymentRequest__r.ApprovedStatePaymentAmount__c &lt; 0,  StateAmountPaid__c &gt; 0) ,AND( PaymentRequest__r.ApprovedFederalPaymentAmount__c &lt; 0,   FederalAmountPaid__c &gt; 0)) )</errorConditionFormula>
        <errorMessage>&quot;Amount Paid&quot; must be Negative, When PR&apos;s Approved Payment Amount is Negative.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Offset_Federal_Amount_Validation</fullName>
        <active>true</active>
        <description>&quot;Federal Amount Paid&quot; must be negative amount, when PR&apos;s Payment Type is &quot;Offset&quot;.</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) ,
AND(  PaymentRequest__r.ExpenditurestoDate__c &lt; 0 , FederalAmountPaid__c &gt; 0))</errorConditionFormula>
        <errorDisplayField>FederalAmountPaid__c</errorDisplayField>
        <errorMessage>&quot;Federal Amount Paid&quot; must be a negative amount when PR&apos;s Payment Type is &quot;Offset&quot;.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Offset_State_Amount_Validation</fullName>
        <active>true</active>
        <description>&quot;State Amount Paid&quot; must be negative amount, when PR&apos;s Payment Type is &quot;Offset&quot;.</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) ,
AND( PaymentRequest__r.ExpenditurestoDate__c &lt; 0 ,  StateAmountPaid__c &gt; 0))</errorConditionFormula>
        <errorDisplayField>StateAmountPaid__c</errorDisplayField>
        <errorMessage>&quot;State Amount Paid&quot; must be a negative amount when PR&apos;s Payment Type is &quot;Offset&quot;.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Positive_Amount_Paid_Validation</fullName>
        <active>true</active>
        <description>&quot;Amount Paid&quot; must be Positive, When PR&apos;s Approved Payment Amount is Positive.</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) , OR( AND(PaymentRequest__r.ApprovedStatePaymentAmount__c &gt; 0, StateAmountPaid__c &lt; 0) ,AND( PaymentRequest__r.ApprovedFederalPaymentAmount__c &gt; 0, FederalAmountPaid__c &lt; 0)) )</errorConditionFormula>
        <errorMessage>&quot;Amount Paid&quot; must be Positive, When PR&apos;s Approved Payment Amount is Positive.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Regular_Payment_Validation</fullName>
        <active>true</active>
        <errorConditionFormula>AND( ISPICKVAL( Payment_Type__c , &apos;Regular Payment&apos;) , ISBLANK( PaymentRequest__c ) )</errorConditionFormula>
        <errorDisplayField>PaymentRequest__c</errorDisplayField>
        <errorMessage>&quot;Payment Request&quot; is required for the Payment Type &quot;Regular Payment&quot;.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>State_Amount_Paid_Validation</fullName>
        <active>false</active>
        <description>State Amount is not applicable &quot;Federal Only&quot; Project..</description>
        <errorConditionFormula>AND( ISBLANK( External_Id__c ) ,
AND( ISPICKVAL( PaymentRequest__r.Project__r.FundingSource__c , &apos;Federal Only&apos;) , 
AND(NOT( ISBLANK( StateAmountPaid__c ) ), NOT( StateAmountPaid__c == 0 ) )
))</errorConditionFormula>
        <errorDisplayField>StateAmountPaid__c</errorDisplayField>
        <errorMessage>&quot;State Amount&quot; is not applicable for the &quot;Federal Only&quot; Project.</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
</CustomObject>
